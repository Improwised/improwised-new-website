---
const { faqs, articleSchema } = Astro.props;

const schema = faqs
  ? [
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        mainEntity: faqs.map((faq: { question: string; answer: string }) => ({
          "@type": "Question",
          name: faq.question,
          acceptedAnswer: {
            "@type": "Answer",
            text: faq.answer,
          },
        })),
      },
      Object.keys(articleSchema).length > 0 && {
        "@context": "https://schema.org",
        "@type": "Article",
        mainEntityOfPage: {
          "@type": "WebPage",
          "@id": `https://www.improwised.com/blog/${articleSchema?.url}/`,
        },
        headline: articleSchema.headline,
        alternativeHeadline: articleSchema.alternativeHeadline,
        description: articleSchema.description,
        image: [new URL(articleSchema.image.src, Astro.site).href],
        author: {
          "@type": "Person",
          name: articleSchema.author,
        },
        publisher: {
          "@type": "Organization",
          name: "Improwised Technologies",
          logo: {
            "@type": "ImageObject",
            url: "https://www.improwised.com/img/logo.png",
          },
        },
        datePublished: articleSchema.publishedDate,
        dateModified: articleSchema.modifiedDate,
        articleSection: articleSchema.articleSection,
        keywords:
          articleSchema.keywords,
        url: "https://www.improwised.com/",
        isPartOf: {
          "@type": "Blog",
          name: "Improwised Blog",
          url: "https://www.improwised.com/blog/",
        },
        timeRequired: articleSchema.timeRequired,
        wordCount: articleSchema.wordCount,
      },
    ].filter(Boolean)
  : null;
---

<script
  is:inline
  type="application/ld+json"
  set:html={JSON.stringify(schema)}
/>
