---
const { faqs, articleSchema } = Astro.props;

const contributor = articleSchema?.contributor
  ? { contributor: { "@type": "Person", name: articleSchema.contributor } }
  : false;
const image = articleSchema?.image
  ? { image: [new URL(articleSchema.image.src, Astro.site).href] }
  : false;

const schema = [
      faqs && {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        mainEntity: faqs.map((faq: { question: string; answer: string }) => ({
          "@type": "Question",
          name: faq.question,
          acceptedAnswer: {
            "@type": "Answer",
            text: faq.answer,
          },
        })),
      },
      {
        "@context": "https://schema.org",
        "@type": "Article",
        mainEntityOfPage: {
          "@type": "WebPage",
          "@id": `https://www.improwised.com/blog/${articleSchema?.url}/`,
        },
        headline: articleSchema.headline,
        description: articleSchema.description,
        ...image,
        // image: [new URL(articleSchema.image.src, Astro.site).href],
        author: {
          "@type": "Person",
          name: articleSchema.author,
        },
        ...contributor,
        publisher: {
          "@type": "Organization",
          name: "Improwised Technologies",
          logo: {
            "@type": "ImageObject",
            url: "https://www.improwised.com/img/logo.png",
          },
        },
        datePublished: articleSchema.publishedDate,
        dateModified: articleSchema.modifiedDate,
        keywords: articleSchema.keywords,
        url: `https://www.improwised.com/blog/${articleSchema?.url}/`,
        isPartOf: {
          "@type": "Blog",
          name: "Improwised Blog",
          url: "https://www.improwised.com/blog/",
        },
      },
    ].filter(Boolean)
  
---

<script
  is:inline
  type="application/ld+json"
  set:html={JSON.stringify(schema)}
/>
